<div class="todo-container">
  <h1>Список задач</h1>

  <input [(ngModel)]="newTitle" placeholder="Новая задача" />
  <input type="date" [(ngModel)]="newDueDate">
  <button (click)="addTodo()">Добавить</button>

  <!-- Фильтр по статусу -->
  <div>
    <label for="filter">Фильтр по статусу:</label>
    <select id="filter" [(ngModel)]="selectedStatus">
      <option value="all">Все</option>
      <option value="active">Активные</option>
      <option value="completed">Завершённые</option>
      <option value="archived">Архив</option>
    </select>
  </div>

  <div class="stats">
    <p>Всего:{{totalCount}}</p>
    <p>Активные:{{activeCount}}</p>
    <p>Завершенные:{{CompletedCount}}</p>
    <p>Архив:{{arhiveCount}}</p>
  </div>

  <button (click)="clearCompleted()">Очистить выполненые</button>
  <ul>
  <li *ngFor="let todo of todos " [ngClass]="{
    'completed': todo.status === 'completed',
    'archived':todo.status === 'archived'
  }">
    
    <input [(ngModel)]="todo.title" (blur)="editTitle(todo.id, todo.title)" />

    <select [(ngModel)]="todo.status" (change)="updateStatus(todo.id, todo.status)">
      <option value="active">Активна</option>
      <option value="completed">Выполнена</option>
      <option value="archived">Архив</option>
    </select>

    <!-- Поле редактирования дедлайна -->
    <input
      type="date"
      [(ngModel)]="todo.dueDate"
      (change)="updateDueDate(todo.id, todo.dueDate || '')"
      (blur)="editTitle(todo.id, todo.title)"
    />

    <div class="meta">
      <span>Создана: {{ todo.createdAt || '—' }}</span>
      <span>Дедлайн: {{ todo.dueDate || '—' }}</span>
    </div>

    <button (click)="deleteTodo(todo.id)">Удалить</button>
  </li>
</ul>
</div>
